//Linha Tooltip 1.2
(function($){$.fn.tooltip=function(options){return new $.tooltip(options,this);};$.tooltip=function(options,elem){var padrao={seletor:'.tooltip',seletorImagem:'imagem',seletorAjax:'ajax',classeArea:'tooltip-area',classeConteudo:'tooltip-conteudo',classeLoad:'tooltip-load',classeSeta:'tooltip-seta',classePrefixoPosicao:'tooltip-posicao',paddingTop:0,paddingLeft:0,posicao:'top2',fixado:true,autoFix:true,tempo:'fast',evento:'mouseover',eventoFim:'mouseout',atributo:'rel',atributoAltura:'altura',atributoLargura:'largura',wrapperTooltip:null,mensagemErro:'Erro no tooltip',onInicia:null,onPosiciona:null,onTermina:null};var o=$.extend(padrao,options),tip={},atual,$d=$(document),$w=$(window);if(elem===undefined){elem=$(o.seletor);}
$d.delegate(elem.selector,o.evento,function(e){return criaTooltip($(this),e);});$d.delegate(elem.selector,o.eventoFim,function(){return removeTooltip($(this));});if(!o.fixado){$d.delegate(elem.selector,'mousemove',function(e){return posicionaTooltip($(this),e);});}
$w.resize(function(e){if(atual){return posicionaTooltip(atual,e);}}).scroll(function(e){if(atual){return posicionaTooltip(atual,e);}});function criaTooltip($t,e){if($.isFunction(o.onInicia)){o.onInicia.apply(this,new Array($t,e,o));}
atual=$t;tip.conteudo=$t.attr(o.atributo),tip.largura=$t.attr(o.atributoLargura),tip.altura=$t.attr(o.atributoAltura);if(tip.conteudo===undefined){return;}
if(o.atributo=='title'){$t.attr('title','');}
tip.area=$('<div></div>').addClass(o.classeArea).css({display:'none',position:'absolute',width:tip.largura,height:tip.altura});tip.tip=$('<div></div>').addClass(o.classeConteudo).appendTo(tip.area);tip.load=$('<div></div>').addClass(o.classeLoad).css({display:'none',position:'fixed',left:0});if($t.hasClass(o.seletorImagem)){tip.load.appendTo('body').fadeIn(o.tempo);tip.load.css({top:$w.height()-tip.load.outerHeight()});var img=new Image();$(img).load(function(){$(this).css({display:'none',height:this.height,width:this.width});tip.tip.html(this).wrapInner(o.wrapperTooltip);tip.area.appendTo('body').fadeIn(o.tempo);tip.load.remove();$(this).fadeIn(o.tempo);return posicionaTooltip($t,e);}).attr('src',tip.conteudo);return;}
else if($t.hasClass(o.seletorAjax)){tip.load.appendTo('body').fadeIn(o.tempo);tip.load.css({top:$w.height()-tip.load.outerHeight()});$.ajax({type:"POST",url:tip.conteudo,success:function(data){tip.tip.html(data).wrapInner(o.wrapperTooltip);tip.area.appendTo('body').fadeIn(o.tempo);tip.load.fadeOut('fast',function(){$(this).remove();});return posicionaTooltip($t,e);},error:function(){tip.tip.html(o.mensagemErro).wrapInner(o.wrapperTooltip);tip.area.appendTo('body').fadeIn(o.tempo);tip.load.fadeOut('fast',function(){$(this).remove();});return posicionaTooltip($t,e);}});return;}
else{tip.tip.html(tip.conteudo).wrapInner(o.wrapperTooltip);tip.area.appendTo('body').fadeIn(o.tempo);return posicionaTooltip($t,e);}}
function removeTooltip($t){if($.isFunction(o.onTermina)){o.onTermina.apply(this,new Array($t,o));}
if(o.atributo=='title'){$t.attr('title',tip.conteudo);}
atual=null;tip.area.remove();$('.'+o.classeArea).remove();tip.load.remove();}
function posicionaTooltip($t,e){var ww=$w.width(),wh=$w.height(),wsl=$w.scrollLeft(),wst=$w.scrollTop(),w=$t.outerWidth(),h=$t.outerHeight(),tpos=$t.offset(),left=tpos.left+o.paddingLeft,topo=tpos.top+o.paddingTop,tipw=tip.area.outerWidth(),tiph=tip.area.outerHeight(),pos=o.posicao,y=topo,x=left,a=o.autoFix,c=o.classePrefixoPosicao;if(o.fixado){switch(pos){case'esquerda':case'direita':if(a&&(wst+wh)<=(topo+tiph/2+15)){y+=-tiph-10;c+='-rodape';}else if(a&&(topo-wst)<(tiph/2+15)){y+=h+10;c+='-topo';}else{y+=-(tiph/2)+(h/2);c+='-centro';}
break;case'top1':case'top2':case'top3':case'top4':case'top5':if(a&&(topo-wst)<(tiph+15)){y+=h+10;c+='-topo';}else{y+=-tiph-10;c+='-rodape';}
break;case'rod1':case'rod2':case'rod3':case'rod4':case'rod5':if(a&&(wst+wh)<=(topo+tiph+15)){y+=-tiph-10;c+='-rodape';}else{y+=h+10;c+='-topo';}
break;}
switch(pos){case'esquerda':if(a&&left<=(tipw+35)){x+=w+10;c+='-direita';}else{x+=-tipw-10;c+='-esquerda';}
break;case'direita':if(a&&ww<=(left+tipw+35)){x+=-tipw-10;c+='-esquerda';}else{x+=w+10;c+='-direita';}
break;case'top1':case'rod1':if(a&&left<=(tipw+30)){c+='-lateral-esquerda';}else{x+=-tipw;c+='-esquerda';}
break;case'top2':case'rod2':if(a&&left<=(tipw/2+30)){c+='-lateral-esquerda';}else if(a&&ww<=(left+tipw/2+30)){x+=-tipw+w;c+='-lateral-direita';}else{x+=(w/2)-(tipw/2);c+='-centro';}
break;case'top3':case'rod3':if(a&&ww<=(left+tipw+30)){x+=-tipw+w;c+='-lateral-direita';}else{x+=w;c+='-direita';}
break;case'top4':case'rod4':if(a&&ww<=(left+tipw+30)){x+=-tipw+w;c+='-lateral-direita';}else{c+='-lateral-esquerda';}
break;case'top5':case'rod5':if(a&&left<=(tipw+30)){c+='-lateral-esquerda';}else{x+=-tipw+w;c+='-lateral-direita';}
break;default:y+=-tiph-5,x+=(w/2)-(tipw/2);break;}}
else{if((e.pageY-tiph-wst-15)<=0){y=e.pageY+15;c+='-rodape';}else{y=e.pageY-tiph-15;c+='-topo';}
if((ww+wsl-e.pageX)<=tipw){x=e.pageX-tipw-15;c+='-lateral-esquerda';}else{x=e.pageX+15;c+='-lateral-direita';}}
tip.area.css({'top':y,'left':x});$('.'+o.classeSeta,tip.area).remove();tip.area.append('<div class="'+o.classeSeta+'"><div class="'+c+'"></div></div>');if($.isFunction(o.onPosiciona)){o.onPosiciona.apply(this,new Array($t,e,o));}
e.preventDefault();}};})(jQuery);